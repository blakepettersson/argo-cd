apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app.kubernetes.io/name: repositorycredentials.argoproj.io
    app.kubernetes.io/part-of: argocd
  name: repositorycredentials.argoproj.io
spec:
  group: argoproj.io
  names:
    kind: RepositoryCredential
    listKind: RepositoryCredentialList
    plural: repositorycredentials
    shortNames:
    - repocreds
    singular: repositorycredential
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.url
      name: URL Pattern
      type: string
    - jsonPath: .spec.type
      name: Type
      type: string
    name: v1alpha0
    schema:
      openAPIV3Schema:
        description: RepositoryCredential holds repository credential templates (CRD
          representation)
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: RepositoryCredentialSpec defines the desired state of RepositoryCredential
            properties:
              forceHttpBasicAuth:
                description: ForceHttpBasicAuth forces basic authentication for HTTP
                  connections
                type: boolean
              git:
                description: Git contains Git-specific repository configuration
                properties:
                  depth:
                    description: Depth specifies the depth for shallow clones. A value
                      of 0 indicates a full clone.
                    format: int64
                    minimum: 0
                    type: integer
                  enableLFS:
                    description: EnableLFS enables Git LFS support for this repository
                    type: boolean
                  githubAppEnterpriseBaseUrl:
                    description: GithubAppEnterpriseBaseURL specifies the base URL
                      of GitHub Enterprise installation. If empty will default to
                      https://api.github.com
                    type: string
                  githubAppID:
                    description: GithubAppId specifies the ID of the GitHub app used
                      to access the repo
                    format: int64
                    type: integer
                  githubAppInstallationID:
                    description: GithubAppInstallationId specifies the installation
                      ID of the GitHub App used to access the repo
                    format: int64
                    type: integer
                type: object
              helm:
                description: Helm contains Helm-specific repository configuration
                properties:
                  enableOCI:
                    description: EnableOCI enables OCI support for Helm charts
                    type: boolean
                  name:
                    description: Name is the name of the Helm repository
                    type: string
                type: object
              insecure:
                description: Insecure specifies whether to skip TLS certificate or
                  SSH host key verification
                type: boolean
              noProxy:
                description: NoProxy specifies a comma-separated list of hosts that
                  should not use the proxy
                type: string
              oci:
                description: OCI contains OCI-specific repository configuration
                properties:
                  insecureSkipTLS:
                    description: InsecureSkipTLS skips TLS verification entirely (forces
                      HTTP instead of HTTPS)
                    type: boolean
                type: object
              proxy:
                description: Proxy specifies the HTTP/HTTPS proxy URL for this repository
                type: string
              secretRef:
                description: SecretRef is a reference to a Secret containing credentials
                properties:
                  name:
                    description: Name is the name of the secret
                    type: string
                required:
                - name
                type: object
              type:
                default: git
                description: Type specifies the type of the repository credentials.
                  Can be "git", "helm", or "oci".
                enum:
                - git
                - helm
                - oci
                type: string
              url:
                description: URL is the URL pattern that these credentials match
                type: string
            required:
            - url
            type: object
            x-kubernetes-validations:
            - message: git configuration can only be set when type is 'git'
              rule: '!has(self.git) || !has(self.type) || self.type == ''git'''
            - message: helm configuration can only be set when type is 'helm'
              rule: '!has(self.helm) || !has(self.type) || self.type == ''helm'''
            - message: oci configuration can only be set when type is 'oci'
              rule: '!has(self.oci) || !has(self.type) || self.type == ''oci'''
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources: {}
